---
title: "[아나콘다]가상환경 생성과 삭제"
date: 2024-01-06
---

# 1. 작성 동기
  1. 최근 오름캠프 강연 중 강사님이 말씀하시길 생각보다 실무에서는 이전 버전이나 낮은 버전을 쓴다고 하셨다. 
  2. 물론 그 경우야 취업하면 그 때 가서 회사에 맞는 버전에 맞게 하면된다고 하셨다.
  3. 그러나 만일 취직하기도 전에 참고하고자 하는 코드의 프로그래밍 언어의 버전이 낮다면 그에 맞는 환경을 구축해야한다.
  4. 이러한 이유로 그에 맞는 환경을 구축하는 아나콘다 가상환경에 대해 작성하려고 한다.

# 2. 필요성

  1. 그럼 정확히 가상환경은 왜 필요할까? 그 이유는 크게 두 가지. 재현(replication)과 구현(implementation)에 있다.
  2. 재현은 어떤 코드가 활용된 환경이나 실제 문제가 발생했을 때 사후 문제가 발생한 상황을 다시 만들어보는 것을 말한다. 
  3. 만일 어떤 프로젝트를 위해 어떤 다른 사람의 코드를 본다고 하면 생각보다 그 코드가 꽤 이전 버전을 쓰는 경우가 있다. 그리고 문제를 재현하는 경우도 마찬가지로 서비스가 아주 최근에 오픈한 게 아니라면 서비스를 오픈할 당시에 맞는 버전을 쓸 가능성이 높다. 
  4. 구현은 어떤 개념이나 논문의 내용을 눈에 보이게 실질적으로 코드로 만드는 것을 말한다. 
  5. 이것도 마찬가지인 게 어떤 라이브러리 같은 경우 이전 버전의 유용한 기능을 다음버전에서 제거하는 경우가 있어서 그런 문제로 개발자들이 해당 라이브러리를 이전 버전의 것을 활용하는 경우가 있다. 그리고 논문 구현의 경우, 중요한 핵심 논문들은 최신 논문보다는 그 뿌리가 되는 오래되고 유명한 논문들이다. 그렇다 보니 결국 논문이 작성된 그 해에 맞는 버전이 사용되었을 가능성이 크다.
  6. 물론 사소한 버전 차이로는 문제가 안 될 수 있지만, major 버전의 차이라면(1.x와 2.x 정도의 차이) 그 차이가 커서 문제가 발생할 수 있다.
  7. 길게 작성했지만 이러한 이유로 가상환경을 구축해서 활용할 필요가 있다.

# 3. 과정

```markdown
※ 유의사항 : 아래 나오는 명령어들은 글 작성날짜(2024-01-06) 기준 최신버전의 아나콘다 문서를 참고하였습니다. 버전 변경에 따라 명령어에는 다소 변화가 있을 수 있습니다.
```

1. Anaconda Prompt 열기
  
2. conda 가상환경 생성

    * cmd 명령어
      ```cmd
      conda create -n <가상환경_이름> <파이썬 버전 또는 추가로 설치할 라이브러리 버전>  
      ```

    * 예시 
      ```cmd
      conda create -n vis python=3.7 openssl spyder  
      ```
  
3. conda 가상환경 활성화

    * cmd 명령어
      ```cmd
      conda activate <가상환경_이름>  
      ```

    * 예시
      ```cmd
      conda activate vis  
      ```

      -> 이후에는 pip 명령어로 Jupyter notebook과 기타 파이썬 라이브러리를 설치해서 잘 쓰면 된다.

4. conda 가상환경 비활성화
    - 가상환경 비활성화 명령어는 해당 가상환경에서 나와서 anaconda의 base 환경으로 나올때 사용한다.

    * cmd 명령어
      ```cmd
      conda deactivate   
      ```

5. conda 가상환경 리스트 조회
    - 가끔 가상환경 이름을 잊어먹는 경우, 가상환경 리스트를 찾는 게 도움이 된다.
    
    * cmd 명령어
      ```cmd
      conda info --envs  
      ```

      ```cmd
      conda env list  
      ```

      위 명령어 둘 중 편한 걸 쓰면 된다.


6. conda 가상환경 삭제
    - 유의 : conda 가상환경 내 패키지를 삭제하는 방식. 즉, 패키지를 전체 삭제하더라도 가상환경 폴더는 남아있다. 물론 가상환경 리스트에서는 삭제된다.
    
    ```markdown
    1. conda 가상환경의 패키지 전부 삭제하는 경우  
    ```

    * cmd 명령어
      ```cmd
      conda remove -n <가상환경_이름> --all
      ```

    * 예시
      ```cmd
      conda remove -n vis --all
      ```


    ```markdown
    2. conda 가상환경의 패키지 일부를 삭제하는 경우
    ```

    * cmd 명령어
      ```cmd
      conda remove -n <가상환경_이름> <삭제할 패키지>
      ```

    * 예시
      ```cmd
      conda remove -n vis scipy wheel
      ```

# 4. 추가사항
  1. 가상환경은 아나콘다 프롬프트만 활용하는 게 아니고 파이썬 자체에도 가상환경 생성 명령어가 있으며, vscode 또한 가상환경을 다룰 수 있다.
  2. 그리고 오히려 프로젝트 폴더로는 파이썬으로 생성한 가상환경 폴더를 이용하고, 사용한 패키지에 대한 정보는 requirements.txt로 남기는 게 좋다.
  3. 하지만 그럼에도 불구하고 아나콘다 가상환경 활용을 권장하는 이유는 쓰기 편하고 다양한 파이썬 버전으로 분리해서 가상환경을 쉽게 만들 수 있기 때문이다.
  4. 파이썬의 경우에는 가상환경을 만드는 거지만 그건 PC 메인 환경에서 벗어난 독립된 환경에서 라이브러리와 패키지를 설치하기 위함이다.
  5. 그렇기에 파이썬 그 자체로 다룬다면 다른 버전의 파이썬을 쓸 필요가 있을 때, 그 버전의 파이썬을 PC에 직접 설치한 다음 환경변수에서 그 버전의 파이썬이 먼저 잡히도록 순서를 변경해줘야한다.

# 5. 참고
  1. create 명령어 : https://docs.conda.io/projects/conda/en/latest/commands/create.html
  2. env 명령어 : https://docs.conda.io/projects/conda/en/latest/commands/env/index.html# 
  3. info 명령어 : https://docs.conda.io/projects/conda/en/latest/commands/info.html
  4. remove 명령어 : https://docs.conda.io/projects/conda/en/latest/commands/remove.html